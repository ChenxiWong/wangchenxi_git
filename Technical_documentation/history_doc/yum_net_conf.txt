返回博客列表
原 荐 CentOS搭建局域网yum服务器
jeff_han  jeff_han
发布时间: 2013/07/17 14:45 阅读: 2048 收藏: 81 点赞: 2 评论: 12
    前一段时间在宁夏电信搭建服务器环境，用到的系统版本是centos6.4。现场的环境大致是：服务器使用私网环境，服务器与服务器之间可以互联互通。由于要安装heartbeat，磁盘阵列的多路合并软件，vsftp，nginx等，这些软件的编译和安装过程中会涉及很多很多依赖，在没有外网环境的情况下，去装依赖包是个相当痛苦的事情。但是按照传统的挂载光盘的方法又显得太笨拙，所以想通过搭建一个yum服务器，让其他服务器通过这台服务器就都可以使用yum来安装软件，摆脱安装依赖包的痛苦，同时提高工作效率。

    搭建局域网的yum服务器需要做两个准备工作，以四台服务器为例，ip地址为：192.168.1.101,192.168.1.102,192.168.1.103,192.168.1.104.其中192.168.1.101作为yum服务器，其它三台服务器通过101来安装rpm包。

    首先将光盘挂载到101上面，然后将光盘中的Packages（RPM包）和repodata（rpm包的一些序列文件）拷贝到101的localrpm文件间下边。

    #cd localrpm

   # python -m SimpleHTTPServer 8000

通过这两个命令就将这些101作为了包服务器，101成为yum源。

    在需要yum服务的服务器上比如102，

   # cd /etc/yum.repos.d

    将该目录下的所有文件备份，然后创建local.repo文件中的内容为

[local]
name=Server
baseurl=http://192.168.1.101:8000#提供yum源服务的地址
enable=1
gpgcheck=0
然后执行

# yum clean all
# yum list    如何出现里面的包名称即安装成功了；

#yum install screen 通过安装screen来验证是否安装成功。

以上就是全部的搭建过程，通过这样形成一个简单的局域网的yum源服务器以后就可以省去很多时间去安装依赖，大大节约运维的人力成本。